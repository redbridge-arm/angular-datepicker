
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title></title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width">
  <link rel="stylesheet" href="styles/bootstrap.css">
  <link rel="stylesheet" href="styles/style.css" />
  <style>
    .clearfix:after,.clearfix:before{display:table;content:"";line-height:0}.clearfix:after{clear:both}.hide-text{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0}[date-picker],[date-picker] td,[date-picker] th{-webkit-border-radius:4px;-moz-border-radius:4px}.input-block-level{display:block;width:100%;min-height:30px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.date-picker-date-time{position:absolute}.date-range .date-picker-date-time{position:inherit}[date-picker-wrapper]{position:absolute;min-width:220px;z-index:10;display:block;font-size:14px}[date-time-append] [date-picker-wrapper] [date-picker]{margin-top:-30px}[date-time-append] [date-picker]{position:relative;margin-right:-1000px;margin-bottom:-1000px}[date-range] [date-picker] .after.before{color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,.25);background-color:#499dcd;background-image:-moz-linear-gradient(top,#5bc0de,#2f6ab4);background-image:-webkit-gradient(linear,0 0,0 100%,from(#5bc0de),to(#2f6ab4));background-image:-webkit-linear-gradient(top,#5bc0de,#2f6ab4);background-image:-o-linear-gradient(top,#5bc0de,#2f6ab4);background-image:linear-gradient(to bottom,#5bc0de,#2f6ab4);background-repeat:repeat-x;border-color:#2f6ab4 #2f6ab4 #1f4677;border-color:rgba(0,0,0,.1) rgba(0,0,0,.1) rgba(0,0,0,.25);filter:progid:DXImageTransform.Microsoft.gradient(enabled=false)}[date-range] [date-picker] .after.before.active,[date-range] [date-picker] .after.before.disabled,[date-range] [date-picker] .after.before:active,[date-range] [date-picker] .after.before:hover,[date-range] [date-picker] .after.before[disabled]{color:#fff;background-color:#2f6ab4}[date-range] [date-picker] .after.before.active,[date-range] [date-picker] .after.before:active{background-color:#24528c\9}[date-picker].hidden{display:none}[date-picker]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;border-radius:4px;background-color:#fff;padding:4px}[date-picker] table{margin:0}[date-picker] td,[date-picker] th{padding:4px 5px;text-align:center;width:20px;height:20px;border-radius:4px;border:none}[date-picker] .switch{width:145px}[date-picker] span{display:block;width:23%;height:26px;line-height:25px;float:left;margin:1%;cursor:pointer;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}[date-picker] span:hover{background:#eee}[date-picker] span.disabled,[date-picker] span.disabled:hover{background:0 0;color:#999;cursor:default}[date-picker] .active,[date-picker] .now{text-shadow:0 -1px 0 rgba(0,0,0,.25);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(enabled=false);background-color:#006dcc;background-image:-moz-linear-gradient(top,#08c,#04c);background-image:-webkit-gradient(linear,0 0,0 100%,from(#08c),to(#04c));background-image:-webkit-linear-gradient(top,#08c,#04c);background-image:-o-linear-gradient(top,#08c,#04c);background-image:linear-gradient(to bottom,#08c,#04c);border-color:#04c #04c #002a80;border-color:rgba(0,0,0,.1) rgba(0,0,0,.1) rgba(0,0,0,.25);color:#fff}[date-picker] .active.active,[date-picker] .active.disabled,[date-picker] .active:active,[date-picker] .active:hover,[date-picker] .active[disabled],[date-picker] .now.active,[date-picker] .now.disabled,[date-picker] .now:active,[date-picker] .now:hover,[date-picker] .now[disabled]{color:#fff;background-color:#04c}[date-picker] .active.active,[date-picker] .active:active,[date-picker] .now.active,[date-picker] .now:active{background-color:#039\9}[date-picker] .now{color:#fff;background-color:#ee735b;background-image:-moz-linear-gradient(top,#ee5f5b,#ee905b);background-image:-webkit-gradient(linear,0 0,0 100%,from(#ee5f5b),to(#ee905b));background-image:-webkit-linear-gradient(top,#ee5f5b,#ee905b);background-image:-o-linear-gradient(top,#ee5f5b,#ee905b);background-image:linear-gradient(to bottom,#ee5f5b,#ee905b);border-color:#ee905b #ee905b #e56218;border-color:rgba(0,0,0,.1) rgba(0,0,0,.1) rgba(0,0,0,.25)}[date-picker] .now.active,[date-picker] .now.disabled,[date-picker] .now:active,[date-picker] .now:hover,[date-picker] .now[disabled]{color:#fff;background-color:#ee905b}[date-picker] .now.active,[date-picker] .now:active{background-color:#e9712d\9}[date-picker] .disabled{background:0 0;color:#999!important;cursor:default}[date-picker] [ng-switch-when=year] span,[date-picker] [ng-switch-when=month] span,[date-picker] [ng-switch-when=minutes] span{height:54px;line-height:54px}[date-picker] [ng-switch-when=date] td{padding:0}[date-picker] [ng-switch-when=date] span{width:100%;height:26px;line-height:26px}[date-picker] [ng-switch-when=date] td span:hover,[date-picker] th:hover{background:#eee;cursor:pointer}
  </style>
</head>
<body ng-app="sample">
  <div class="row-fluid" ng-controller="DemoController">
    <div class="span4">
      <div>
        <h2>Timezones</h2>

        <div ng-repeat="timezone in timezones">

          <h4>{{timezone[0]}}</h4>

          <div date-picker="dates.today" timezone="{{timezone[1]}}" view="hours" min-view="hours" watch-direct-changes="true"></div>

          <hr />

        </div>

        <h4>No timezone (Uses local)</h4>

        <div date-picker="dates.today" view="hours" min-view="hours" watch-direct-changes="true"></div>

      </div>
      <hr />

      <h2>Custom formats</h2>
      <div ng-repeat="format in formats">
        <h5>{{format}}</h5>
        <input type="text" date-time ng-model="dates.today" view="hours" format="{{format}}">
      </div>

    </div>
    <div class="span4">
      <h2>Minimum / Maximum dates</h2>

      <div>
        <h4>Always open div (date-picker directive)</h4>

        <div>
          <h5>Minimum</h5>
          <div date-picker="dates.today" id="pickerMinDateDiv" min-date="minDate" view="date" min-view="hours" timezone="UTC" watch-direct-changes="true"></div>
        </div>

        <div>
          <h5>Maximum</h5>
          <div date-picker="dates.today" id="pickerMaxDateDiv" max-date="maxDate" view="date" min-view="hours" timezone="UTC" watch-direct-changes="true"></div>
        </div>

        <div>
          <h5>Minimum + maximum</h5>
          <div date-picker="dates.today" id="pickerBothDatesDiv" min-date="minDate" max-date="maxDate" view="date" min-view="hours" timezone="UTC" watch-direct-changes="true"></div>
        </div>
      </div>

      <div>
        <h4>Input with popup (date-time directive)</h4>

      <form name="demoForm">
      <div>
        <h5>Min ({{demoForm.pickerMinDate.$error.min ? 'Min: invalid' : 'Min: valid'}})</h5>        
        <input date-time name="pickerMinDate" ng-model="dates.today" id="pickerMinDate" min-date="minDate" view="date" min-view="hours" timezone="UTC" format="lll">
      </div>

      <div>
        <h5>Max ({{demoForm.pickerMaxDate.$error.max ? 'Max: invalid' : 'Max: valid'}})</h5>
        <input date-time name="pickerMaxDate" ng-model="dates.today" id="pickerMaxDate" max-date="maxDate" view="date" min-view="hours" timezone="UTC" format="lll">
      </div>

      <div>
        <h5>Min + max ({{demoForm.pickerBothDates.$error.min ? 'Min: invalid, ' : 'Min: valid, '}} {{demoForm.pickerBothDates.$error.max ? 'max: invalid' : 'max: valid'}})</h5>
        <input date-time name="pickerBothDates" ng-model="dates.today" id="pickerBothDates" min-date="minDate" max-date="maxDate" view="date" min-view="hours" timezone="UTC" format="lll">
      </div>
    </form>
      </div>

      <div>
        <h2>Range</h2>

        <div date-range id="pickerRange" start="dates.minDate" end="dates.maxDate" date-change="changeDate" view="date" min-view="date" timezone="UTC"></div>

      </div>

    </div>
    <div class="span4">
      <h2>Update events</h2>
      <div>
        <h4>Minimum date</h4>
        <input date-time ng-model="dates.minDate" id="pickerMinSelector" date-change="changeMinMax" max-date="maxDate" view="date" timezone="UTC" format="lll">
      </div>
      <div>
        <h4>Maximum date</h4>
        <input date-time ng-model="dates.maxDate" id="pickerMaxSelector" date-change="changeMinMax" min-date="minDate" view="date" timezone="UTC" format="lll">
      </div>

      <div>
        <h4>Default view</h4>

        <select ng-change="changeData('view')"
                ng-options="view for view in views"
                ng-model="options.view"></select>
      </div>

      <div>
        <h4>Min view</h4>

        <select ng-change="changeData('minView')"
                ng-options="view for view in views"
                ng-model="options.minView">
          <option value="">Disabled</option>
        </select>
      </div>

      <div>
        <h4>Max view</h4>

        <select ng-change="changeData('maxView')"
                ng-options="view for view in views"
                ng-model="options.maxView">
          <option value="">Disabled</option>
        </select>
      </div>

      <div>
        <h4>Format</h4>

        <select ng-change="changeData('format')"
                ng-options="format for format in formats"
                ng-model="options.format">
          <option value="">Disabled</option>
        </select>
      </div>

      <h2>Callback</h2>
      <div>
        <h4>Select a date from either picker</h4>
        <div ng-bind="callbackState"></div>
        <button ng-click="callbackState = 'Callback: Not fired'">Reset state</button>
      </div>
      <input type="text" date-time ng-model="dates.today"  view="hours" date-change="changeDate">
      <div date-picker="dates.today" view="date" date-change="changeDate" timezone="UTC" watch-direct-changes="true"></div>

      <h2>Form validation</h2>
      <form name="Form">
        <div>
          <h4>Select a date from either picker</h4>
          <div>Form date: <span ng-bind="dates.formdate"></span></div>
          <div>Form invalid: <span ng-bind="Form.$invalid"></span></div>
        </div>
        <input type="text" date-time ng-model="dates.formdate" view="date" min-view="date" format="DD MMM YYYY">
      </form>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.6/moment.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment-timezone/0.4.1/moment-timezone-with-data.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/1.3.1/ui-bootstrap-tpls.min.js"></script>
  <script src="scripts/datePicker.js"></script>
  <script src="scripts/datePickerUtils.js"></script>
  <script src="scripts/dateRange.js"></script>
  <script src="scripts/input.js"></script>
  <script>
    var demoApp = angular.module('sample', ['datePicker', 'ui.bootstrap']);
    demoApp.controller('DemoController', function ($scope) {
      $scope.dates = {
        today: moment.tz('UTC').hour(12).startOf('h'), //12:00 UTC, today.
        minDate: moment.tz('UTC').add(-4, 'd').hour(12).startOf('h'), //12:00 UTC, four days ago.
        maxDate: moment.tz('UTC').add(4, 'd').hour(12).startOf('h'), //12:00 UTC, in four days.
      };

      $scope.options = {
        view: 'date',
        format: 'lll',
        maxView: false,
        minView: 'hours',
      };

      $scope.minDate = $scope.dates.minDate;
      $scope.maxDate = $scope.dates.maxDate;

      $scope.formats = [
         "MMMM YYYY",
         "DD MMM YYYY",
         "ddd MMM DD YYYY",
         "D MMM YYYY HH:mm",
         "lll",
      ];

      $scope.timezones = [
        ['London, UK', 'Europe/London'],
        ['Hong Kong, China', 'Asia/Hong_Kong'],
        ['Vancouver, Canada', 'America/Vancouver'],
      ];

      $scope.views = ['year', 'month', 'date', 'hours', 'minutes'];

      $scope.callbackState = 'Callback: Not fired';

      $scope.changeDate = function (modelName, newDate) {
        console.log(modelName + ' has had a date change. New value is ' + newDate.format());
        $scope.callbackState = 'Callback: Fired';
      }

      $scope.changeMinMax = function (modelName, newValue) {
        //minDate or maxDate updated. Generate events to update relevant pickers

        var values = {
          minDate: false,
          maxDate: false,
        }

        if (modelName === 'dates.minDate') {
          values.minDate = newValue;
          $scope.$broadcast('pickerUpdate', ['pickerMinDate', 'pickerMinDateDiv', 'pickerMaxSelector'], values);
          values.maxDate = $scope.dates.maxDate;
        } else if (modelName === 'dates.maxDate') {
          values.maxDate = newValue;
          $scope.$broadcast('pickerUpdate', ['pickerMaxDate', 'pickerMaxDateDiv', 'pickerMinSelector'], values);
          values.minDate = $scope.dates.minDate;
        }

        //For either min/max update, update the pickers which use both.
        $scope.$broadcast('pickerUpdate', ['pickerBothDates', 'pickerBothDatesDiv'], values);
      }

      $scope.changeData = function (type) {
        var values = {},
            pickersToUpdate = ['pickerMinDate', 'pickerMaxDate', 'pickerBothDates', 'pickerMinDateDiv', 'pickerMaxDateDiv', 'pickerBothDatesDiv', 'pickerRange'];

        switch (type) {
          case 'view':
            values.view = $scope.options.view;
            break;
          case 'minView':
            values.minView = $scope.options.minView;
            break;
          case 'maxView':
            values.maxView = $scope.options.maxView;
            break;
          case 'format':
            values.format = $scope.options.format;
            break;
        }

        if (values) {
          $scope.$broadcast('pickerUpdate', pickersToUpdate, values);
        }
      }
    });
  </script>
</body>
</html>
